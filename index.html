<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Timeløn & Vagtregistrering</title>
  <style>
    body {
      background-color: #fff;
      color: #000;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    button, input, select {
      margin: 5px;
      padding: 6px;
    }
    .tab-btn {
      background-color: #eee;
      border: 1px solid #ccc;
      padding: 8px 16px;
      cursor: pointer;
    }
    .tab-btn.active {
      background-color: #ccc;
    }
    .tab-content {
      display: none;
      margin-top: 20px;
    }
    .tab-content.active {
      display: block;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: center;
    }
    .red-btn {
      background-color: red;
      color: white;
      border: none;
      padding: 6px 10px;
    }
  </style>
</head>
<body>

  <button class="tab-btn active" onclick="skiftFane('beregner')">Timelønsberegner</button>
  <button class="tab-btn" onclick="skiftFane('vagt')">Vagtregistrering</button>

  <!-- Timelønsberegner -->
  <div id="beregner" class="tab-content active">
    <h2>Timelønsberegner</h2>
    <label>Timer: <input type="number" id="timerBeregner" /></label><br />
    <label>Timeløn (kr): <input type="number" id="loenBeregner" value="74" /></label><br />
    <label>Tillæg pr. time (kr): <input type="number" id="tillaegBeregner" value="20" /></label><br />
    <label>Timer med tillæg: <input type="number" id="tillaegTimerBeregner" /></label><br />
    <label>Arbejdsmarkedsbidrag (AMB) %: <input type="number" id="ambBeregner" value="8" /></label><br />
    <label>Skat %: <input type="number" id="skatBeregner" value="0" /></label><br />
    <button onclick="beregnLoen()">Beregn</button>

    <p id="resultatBeregner"></p>
  </div>

  <!-- Vagtregistrering -->
  <div id="vagt" class="tab-content">
    <h2>Vagtregistrering</h2>

    <label>Dato: <input type="date" id="dato" /></label><br />
    <label>Timer totalt: <input type="number" id="timer" /></label><br />
    <label>Med tillæg? 
      <select id="medTillaeg">
        <option>Ja</option>
        <option>Nej</option>
      </select>
    </label><br />
    <label>Timer med tillæg: <input type="number" id="timerMedTillaeg" /></label><br />
    <button onclick="tilfoejVagt()">Tilføj vagt</button>
    <button class="red-btn" onclick="rydVagter()">Ryd alle vagter</button>

    <h3>Vagter</h3>
    <table id="vagtTabel">
      <tr>
        <th>Dato</th>
        <th>Timer totalt</th>
        <th>Med tillæg</th>
        <th>Timer med tillæg</th>
        <th>Slet</th>
      </tr>
    </table>

    <p id="opsummering"></p>

    <label>Timeløn (kr): <input type="number" id="timeloen" value="74" /></label><br />
    <label>Tillæg pr. time (kr): <input type="number" id="tillaeg" value="20" /></label><br />
    <label>Arbejdsmarkedsbidrag (AMB) %: <input type="number" id="amb" value="8" /></label><br />
    <label>Skat %: <input type="number" id="skat" value="0" /></label><br />
  </div>

  <script>
    // Fane-skifter
    function skiftFane(id) {
      document.querySelectorAll(".tab-btn").forEach(btn => btn.classList.remove("active"));
      document.querySelectorAll(".tab-content").forEach(tab => tab.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      event.target.classList.add("active");
    }

    // Beregner
    function beregnLoen() {
      const timer = parseFloat(document.getElementById("timerBeregner").value) || 0;
      const loen = parseFloat(document.getElementById("loenBeregner").value) || 0;
      const tillaeg = parseFloat(document.getElementById("tillaegBeregner").value) || 0;
      const tillaegTimer = parseFloat(document.getElementById("tillaegTimerBeregner").value) || 0;
      const amb = parseFloat(document.getElementById("ambBeregner").value) || 0;
      const skat = parseFloat(document.getElementById("skatBeregner").value) || 0;

      const brutto = (timer * loen) + (tillaegTimer * tillaeg);
      const efterAMB = brutto * (1 - amb / 100);
      const efterSkat = efterAMB * (1 - skat / 100);

      document.getElementById("resultatBeregner").innerHTML = `
        Bruttoløn: ${brutto.toFixed(2)} kr.<br />
        Efter AM-bidrag (${amb}%): ${efterAMB.toFixed(2)} kr.<br />
        Efter skat (${skat}%): ${efterSkat.toFixed(2)} kr.
      `;
    }

    // Vagtlogik
    let vagter = [];

    function tilfoejVagt() {
      const dato = document.getElementById("dato").value;
      const timer = parseFloat(document.getElementById("timer").value);
      const medTillaeg = document.getElementById("medTillaeg").value === "Ja";
      const timerMedTillaeg = parseFloat(document.getElementById("timerMedTillaeg").value) || 0;

      if (!dato || isNaN(timer)) {
        alert("Udfyld både dato og timer.");
        return;
      }

      if (medTillaeg && timerMedTillaeg > timer) {
        alert("Timer med tillæg kan ikke være mere end samlet timer.");
        return;
      }

      vagter.push({ dato, timer, medTillaeg, timerMedTillaeg });
      opdaterVagter();
    }

    function sletVagt(index) {
      vagter.splice(index, 1);
      opdaterVagter();
    }

    function rydVagter() {
      vagter = [];
      opdaterVagter();
    }

    function opdaterVagter() {
      const tabel = document.getElementById("vagtTabel");
      tabel.innerHTML = `
        <tr>
          <th>Dato</th>
          <th>Timer totalt</th>
          <th>Med tillæg</th>
          <th>Timer med tillæg</th>
          <th>Slet</th>
        </tr>`;

      let totalTimer = 0;
      let totalTillaegTimer = 0;

      vagter.forEach((vagt, index) => {
        totalTimer += vagt.timer;
        totalTillaegTimer += vagt.medTillaeg ? vagt.timerMedTillaeg : 0;

        const row = tabel.insertRow();
        row.innerHTML = `
          <td>${vagt.dato}</td>
          <td>${vagt.timer}</td>
          <td>${vagt.medTillaeg ? "Ja" : "Nej"}</td>
          <td>${vagt.medTillaeg ? vagt.timerMedTillaeg : 0}</td>
          <td><button onclick="sletVagt(${index})">Slet</button></td>
        `;
      });

      const timeloen = parseFloat(document.getElementById("timeloen").value) || 0;
      const tillaeg = parseFloat(document.getElementById("tillaeg").value) || 0;
      const amb = parseFloat(document.getElementById("amb").value) || 0;
      const skat = parseFloat(document.getElementById("skat").value) || 0;

      const brutto = (totalTimer * timeloen) + (totalTillaegTimer * tillaeg);
      const efterAMB = brutto * (1 - amb / 100);
      const efterSkat = efterAMB * (1 - skat / 100);

      document.getElementById("opsummering").innerHTML = `
        <strong>Total arbejdstimer:</strong> ${totalTimer.toFixed(2)}<br />
        <strong>Bruttoløn:</strong> ${brutto.toFixed(2)} kr.<br />
        <strong>Efter AM-bidrag (${amb}%):</strong> ${efterAMB.toFixed(2)} kr.<br />
        <strong>Efter skat (${skat}%):</strong> ${efterSkat.toFixed(2)} kr.
      `;
    }
  </script>

</body>
</html>
