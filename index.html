<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Vagtregistrering og Løn</title>
  <style>
    body {
      background-color: #121212;
      color: white;
      font-family: Arial, sans-serif;
    }
    input, select, button {
      margin: 5px;
      padding: 5px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #444;
      padding: 5px;
      text-align: center;
    }
    .red-btn {
      background-color: red;
      color: white;
      border: none;
      padding: 5px 10px;
    }
  </style>
</head>
<body>

  <h2>Vagtregistrering</h2>

  <label>Dato: <input type="date" id="dato" /></label><br />
  <label>Timer totalt: <input type="number" id="timer" /></label><br />
  <label>Med tillæg? 
    <select id="medTillaeg">
      <option>Ja</option>
      <option>Nej</option>
    </select>
  </label><br />
  <label>Timer med tillæg: <input type="number" id="timerMedTillaeg" /></label><br />
  <button onclick="tilfoejVagt()">Tilføj vagt</button>
  <button class="red-btn" onclick="rydVagter()">Ryd alle vagter</button>

  <h3>Vagter</h3>
  <table id="vagtTabel">
    <tr>
      <th>Dato</th>
      <th>Timer totalt</th>
      <th>Med tillæg</th>
      <th>Timer med tillæg</th>
      <th>Slet</th>
    </tr>
  </table>

  <p id="opsummering"></p>

  <label>Timeløn (kr): <input type="number" id="timeloen" value="74" /></label><br />
  <label>Tillæg pr. time (kr): <input type="number" id="tillaeg" value="20" /></label><br />
  <label>Arbejdsmarkedsbidrag (AMB) %: <input type="number" id="amb" value="8" /></label><br />
  <label>Skat %: <input type="number" id="skat" value="0" /></label><br />

  <script>
    let vagter = [];

    function tilfoejVagt() {
      const dato = document.getElementById("dato").value;
      const timer = parseFloat(document.getElementById("timer").value);
      const medTillaeg = document.getElementById("medTillaeg").value === "Ja";
      const timerMedTillaeg = parseFloat(document.getElementById("timerMedTillaeg").value) || 0;

      if (!dato || isNaN(timer)) {
        alert("Udfyld både dato og timer.");
        return;
      }

      if (medTillaeg && timerMedTillaeg > timer) {
        alert("Timer med tillæg kan ikke være mere end samlet timer.");
        return;
      }

      vagter.push({ dato, timer, medTillaeg, timerMedTillaeg });
      opdaterVagter();
    }

    function sletVagt(index) {
      vagter.splice(index, 1);
      opdaterVagter();
    }

    function rydVagter() {
      vagter = [];
      opdaterVagter();
    }

    function opdaterVagter() {
      const tabel = document.getElementById("vagtTabel");
      tabel.innerHTML = `
        <tr>
          <th>Dato</th>
          <th>Timer totalt</th>
          <th>Med tillæg</th>
          <th>Timer med tillæg</th>
          <th>Slet</th>
        </tr>`;

      let totalTimer = 0;
      let totalTimerMedTillaeg = 0;

      vagter.forEach((vagt, index) => {
        totalTimer += vagt.timer;
        totalTimerMedTillaeg += vagt.medTillaeg ? vagt.timerMedTillaeg : 0;

        const row = tabel.insertRow();
        row.innerHTML = `
          <td>${vagt.dato}</td>
          <td>${vagt.timer}</td>
          <td>${vagt.medTillaeg ? "Ja" : "Nej"}</td>
          <td>${vagt.medTillaeg ? vagt.timerMedTillaeg : 0}</td>
          <td><button onclick="sletVagt(${index})">Slet</button></td>
        `;
      });

      const timeloen = parseFloat(document.getElementById("timeloen").value) || 0;
      const tillaeg = parseFloat(document.getElementById("tillaeg").value) || 0;
      const amb = parseFloat(document.getElementById("amb").value) || 0;
      const skat = parseFloat(document.getElementById("skat").value) || 0;

      const brutto = (totalTimer * timeloen) + (totalTimerMedTillaeg * tillaeg);
      const efterAMB = brutto * (1 - amb / 100);
      const efterSkat = efterAMB * (1 - skat / 100);

      document.getElementById("opsummering").innerHTML = `
        <strong>Total arbejdstimer:</strong> ${totalTimer.toFixed(2)}<br />
        <strong>Bruttoløn:</strong> ${brutto.toFixed(2)} kr.<br />
        <strong>Efter AM-bidrag (${amb}%):</strong> ${efterAMB.toFixed(2)} kr.<br />
        <strong>Efter skat (${skat}%):</strong> ${efterSkat.toFixed(2)} kr.
      `;
    }
  </script>

</body>
</html>
